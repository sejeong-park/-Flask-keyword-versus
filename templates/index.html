<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{url_for('static',filename='index.css')}}">
</head>
<body>
    <h1>키워드 대결?!?!?!</h1>
    <form action="\" method="get"> <!--get으로 flask 연결-->
        <label for="keyword1">첫번째 키워드</label>
        <input type="text" name="keyword1"> 
        <label for="keyword2">두번째 키워드</label>
        <input type="text" name="keyword2"> 
        <button type="submit">검색!</button>      
    </form>

    {% if data %}
    <div id="visual_result">
        {% for k,v in data.items() %}<div class="bar bar{{loop.index}}" value="{{v}}">{{k}}</div>{% endfor %} 
    </div>
    {% endif %}
    
    <script>
        function draw_bar(){
            var bars=document.querySelectorAll('.bar');

            var total=0;

            for(var i=0;i<bars.length;i++){
                    total +=parseInt(bars[i].getAttribute('value'));
                    //parseInt를 통해 숫자로 이루어진 글자를 형변환을 시켜 더한다. 
            };
            console.log('total = '+ total);

            // 반복을 통해서 div에 width를 설정해준다.
            for (var i=0;i<bars.length;i++){
                w=bars[i].getAttribute('value')
                console.log(w)// w도 글자로 이루어진 숫자일 테니까, parseInt를 통해 형변환
                bars[i].style.width=parseInt(w)/total*100+'%';
            };
    };

    //시간 차 실행
    setTimeout(draw_bar,500);
    </script>

    
</body>
</html>